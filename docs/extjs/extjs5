//Дебаг классов в Extjs
Ext.define('BufferInfo', {
    override: 'Ext.grid.plugin.BufferedRenderer',
    setBodyTop: function(bodyTop) {
        debugger;
        this.callParent(arguments);
    }
});

//Инициализация приложения
Ext.onReady(function(){
    Ext.application({
        name: 'MyApp',
        launch: function(){}
    });
});

//Инициализация viewport
Ext.onReady(function(){
    var childPanel = Ext.create('Ext.panel.Panel', {
        title: 'Child Panel 1',
        html: 'A Panel'
    });
    Ext.create('Ext.container.Viewport', {
        items: [childPanel]
    });
});

//Callback при загрузке класса
Ext.define('Test', {
    constructor: function(){
        console.log('CONSTRUCTOR')
    }
}, function(){
    console.log('CALLBACK')
});

//Сonfig, геттеры и сеттеры
Ext.define('My.own.Window', {
    extend: 'Ext.window.Window',
    isWindow: true,
    config: {
        title: 'Title Here'
    },
    applyTitle: function(title) {
        if (!this.title && title){
            this.title = title;
        }
    }
});
var myWindow = Ext.create('My.own.Window', {
     renderTo: Ext.getBody(),
     width: 200,
     height: 150,
     bodyPadding: 5,
     html: 'HTML'
});
myWindow.setTitle('TITLE');
myWindow.show();
console.log(myWindow.getTitle());

//Создание собственного компонента
Ext.define('Ext.ux.Image', {
    extend: 'Ext.Component',
    alias: 'widget.managedimage',
    autoEl: {
        tag: 'img',
        src: Ext.BLANK_IMAGE_URL,
        cls: 'my-managed-image'
    },
    onRender: function() {
        this.autoEl = Ext.apply({}, this.initialConfig, this.autoEl);
        this.callParent(arguments);
        this.el.on('load', this.onLoad, this);
    },
    onLoad: function() {
        this.fireEvent('load', this);
    },
    setSrc: function(src) {
        if (this.rendered) {
            this.el.dom.src = src;
        } else {
            this.src = src;
        }
    },
    getSrc: function(src) {
        return this.el.dom.src || this.src;
    }
});
var image = Ext.create('Ext.ux.Image');
Ext.create('Ext.panel.Panel', {
    title: 'Image Panel',
    height: 200,
    renderTo: Ext.getBody(),
    items: [ image ]
});
image.on('load', function() {
    console.log('image loaded: ', image.getSrc());
});
image.setSrc('http://www.sencha.com/img/sencha-large.png');

//Обновление layout вручную
var container = Ext.create('Ext.panel.Panel', {
    renderTo: Ext.getBody(),
    width: 400,
    height: 200,
    title: 'Parent',
    suspendLayout: true
});
container.add({
    xtype: 'panel',
    title: 'Child'
});
container.suspendLayout = false;
container.updateLayout();

//5 способов рендеринга html внутри контейнера
items: [{
        html: "<a href='#'>1. HTML property of a panel</a>",
        xtype: "panel"
    },{
        xtype: "panel",
        html: new Ext.XTemplate("<a href='#'>{value}").apply({
            value: '2. HTML property of a panel generated by an XTemplate'
        })
    },{
        xtype: 'box',
        autoEl: {
            tag: 'a',
            html: '3. Dom element created by a DomHelper and wrapped as Component',
            href: '#'
        }
    },{
        tpl: "<a href='#'>{value}",
        data: {value: 'qwerty'}
    },{
        renderTpl: '<span>Hello {name}</span>',
        renderData: {name: 'LeVeon'}
    }
]

//Выборка DOM-элементов
//QUERY
//HTMLElement Ext.query(selector/xpath, [HTMLElement], ["select"||"simple"], [single=true])
var query = Ext.query('#element-id');
query.removeCls('cls-name');
query.addCls('cls-name');
query.applyStyles("width: 100%; height: 100%;");

//SELECT
//Ext.CompositeElementLite/Ext.CompositeElement Ext.select(String/HTMLElement, [unique:bool], [root:HTMLElement/String])
var select = Ext.select('#element-id');
select.removeCls('cls-name');
select.addCls('cls-name');
select.applyStyles("width: 100%; height: 100%;");

//GET
//Ext.dom.Element Ext.get(String/HTMLElement/Ext.Element);
var get = Ext.get('element-id');
get.getAttribute('class');
get.applyStyles("background:#B5B8C8;");
get.removeCls('cls-name');
get.addCls('cls-name');

//FLY
//Ext.dom.Element.Fly Ext.fly(String/HTMLElement, [named:String])
var fly = Ext.fly(grid.getView().getNode(record));
var rowEls = fly.query('.x-grid-cell');

//GETCMP
//Ext.Component Ext.getCmp(String);
var cmp = Ext.getCmp('element-id');

//2 варианта добавления нескольких обработчиков на одно событие
//1: наследование
Ext.define('Child', {
    extend: 'Parent',
    constructor: function(config){
        var cfg = this.callParent(arguments);
        this.on({
            beforeshow: function(){
                console.log(222)
            }
        });
        return cfg;
    }
});
Ext.create('Child', {
    listeners: {
        beforeshow: function(){
            console.log(111)
        }
    }
});

//2: композиция
Ext.define('Child', {
    constructor: function(config){
        var tip = Ext.create('Parent', config);
        tip.on({
            beforeshow: function(ths){
                console.log(222)
            },
        });
        return tip;
    }
});
Ext.create('Child', {
    listeners: {
        beforeshow: function(){
            console.log(111)
        }
    }
});
